<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Calculadora_eventos</title>
<link rel="stylesheet" href="estilo_calculadora.css">

<!---Aqui comienza el -->

<script>

  var cifra=""; //Cifra va a ser una variable vacía del tipo texto por la comillas

  var acumulado=0;//Recursividades bergas

  var sumar=false;
  var restar=false;
  var multiplicar=false;
  var dividir=false;
  var factorial = false;

  var p_operacion=true;

  function display_numeros(numero){

    document.getElementById("display").value=cifra+numero;//Cifra es el caracter de texto vacio
    /*Luego lo que va a mostrar el display va a ser el caracter vacio junto al número que introduzca en la función
    Así si introduzco 5, display = ""5 ó 5 a secas
    luego cifra va a almacenar el valor cifra+número abajo. con lo que cifra = "5"(Almacenado como texto para que no se sumen)
    Al introducir un nuevo número por ejemplo 3, el display va a mostrar 3+"5", es decir 35 y ahora cifra=="35" como texto
    y así sucesivamente con cada nuevo número a agregar.
    */


    cifra=document.getElementById("display").value;//(almacena el valor del display en cifra)

  } 

  //---------------------------------------division-----------------------------------------------//

  function divide(){

    if(p_operacion){

      acumulado=parseInt(cifra);

      document.getElementById("display").value=acumulado;

      cifra="";

      }

      else if (restar) {       

      acumulado=acumulado-parseInt(cifra);

      document.getElementById("display").value=acumulado;//Siempre muestra el acumulado
        }

      else if(multiplicar){

      acumulado=acumulado*parseInt(cifra);

      document.getElementById("display").value=acumulado;//Siempre muestra el acumulado


      }

      else if(factorial){

      acumulado=acumulado;
      cifra=0;        
      }

      else if (sumar){

      acumulado=acumulado+parseInt(cifra);//Si lo ultimo q hiciste es sumar, terminame de acumular todo lo que hay en la pantalla en acumulado para poder operar con un acumulado real
      document.getElementById("display").value=acumulado;
      //Me termina de montrar el acumulado

      }
      
       else{

    acumulado=(parseInt(acumulado) / parseInt(cifra));

    document.getElementById("display").value=acumulado;

      }

    cifra="";

    p_operacion=false;

    sumar=false;

    restar=false;

    multiplicar=false;
    
    dividir=true;

    factorial=false;


   }

   //--------------------------multiplicacion--------------------------------------------//

  function multiplica(){

      if(p_operacion){

      acumulado=parseInt(cifra);

      document.getElementById("display").value=acumulado;

      cifra="";

      }

      else if (restar){      

      acumulado=acumulado-parseInt(cifra);

      document.getElementById("display").value=acumulado;//Siempre muestra el acumulado
      }
      

      else if(dividir){
      acumulado=acumulado/parseInt(cifra);

      document.getElementById("display").value=acumulado;//Siempre muestra el acumulado

      }
      else if(factorial){

      acumulado=document.getElementById("display").value;
      document.getElementById("display").value=acumulado;
      cifra=0;   

      }

      else if (sumar){

      acumulado=acumulado+parseInt(cifra);//Si lo ultimo q hiciste es sumar, terminame de acumular todo lo que hay en la pantalla en acumulado para poder operar con un acumulado real
      document.getElementById("display").value=acumulado;
      //Me termina de montrar el acumulado

      }      
      
       else{

    acumulado=parseInt(acumulado) * parseInt(cifra);

    document.getElementById("display").value=acumulado;

      }

    cifra="";

    p_operacion=false;
    sumar=false;
    restar=false;
    multiplicar=true;    
    dividir=false;
    factorial=false;


   }
 //---------------------------------------------SUMATORIA------------------------------------------------//

  function suma() {

    if (restar){      

        acumulado=acumulado-parseInt(cifra);

        document.getElementById("display").value=acumulado;//Siempre muestra el acumulado
      }

      else if(multiplicar){

        acumulado=acumulado*parseInt(cifra);

        document.getElementById("display").value=acumulado;//Siempre muestra el acumulado


      }

      else if(dividir){
        acumulado=acumulado/parseInt(cifra);

        document.getElementById("display").value=acumulado;//Siempre muestra el acumulado

      }
      else if(factorial){

        acumulado=acumulado;
        cifra=0;        
      }     
      

     else{    

    acumulado=acumulado+parseInt(cifra); //Recursividades bergas  

    document.getElementById("display").value=acumulado;//Siempre muestra el acumulado   
   
      
    }
    cifra="";//cuando ingresamos el otro número se borra el anterior

    sumar=true;
    restar=false;
    multiplicar=false;
    dividir=false;
    factorial = false;
    p_operacion=false;
  
   }

//------------------------------------------------RESTA-----------------------------------------//

  function resta() {


    if (sumar){

      acumulado=acumulado+parseInt(cifra);//Si lo ultimo q hiciste es sumar, terminame de acumular todo lo que hay en la pantalla en acumulado para poder operar con un acumulado real
      document.getElementById("display").value=acumulado;
      //Me termina de montrar el acumulado

    }
    else if(factorial){

        acumulado=acumulado;
        cifra=0;        
      }

      else if(multiplicar){

        acumulado=acumulado*parseInt(cifra);

        document.getElementById("display").value=acumulado;//Siempre muestra el acumulado


      }

        else if(dividir){
        acumulado=acumulado/parseInt(cifra);

        document.getElementById("display").value=acumulado;//Siempre muestra el acumulado

      }

     else{

      if(p_operacion){

        acumulado=parseInt(cifra)-acumulado;

        document.getElementById("display").value=acumulado;

      } 
      
       else{

        acumulado=acumulado-parseInt(cifra);

        document.getElementById("display").value=acumulado;//Siempre muestra el acumulado
      }
    }

    cifra="";//Reset de cifra
    
    sumar=false;

    restar=true;

    multiplicar=false;

    dividir=false;

    factorial = false; 

    p_operacion=false;
  
   }

//----------------------------------------------------FACTORIAL-----------------------------------------------//   

   function fact() {

     if(sumar,restar,multiplicar, dividir){
       cifra=document.getElementById("display").value;
     }


    
    acumulado=parseInt(document.getElementById("display").value)
    cifra=acumulado;

    for(var i=1;i<cifra;i++){      

      acumulado=acumulado*i;

    }

    document.getElementById("display").value=acumulado;

    sumar=false;
    restar=false;
    multiplicar=false;
    dividir=false;
    factorial = true;
    p_operacion=false;
     
   }

//--------------------------------------------IGUALDAD---------------------------------------------//

   function igual(){

    if (sumar){
      document.getElementById("display").value=acumulado+parseInt(cifra);//Me muestra cuanto sería acumulado+cifra, pero aún no son una cantidad almacenada en si misma

    }

    else if (restar) {
     document.getElementById("display").value=acumulado-parseInt(cifra); 
    }

    else if(multiplicar){
      document.getElementById("display").value=acumulado*parseInt(cifra);      
    }

    else if(dividir){
      document.getElementById("display").value=(acumulado/parseInt(cifra));      
    }

    

    if(multiplicar==false && dividir==false){

    acumulado=parseInt(document.getElementById("display").value);
    //El acumulado va a ser lo que aparezca en el display de la calculadora.

    cifra=0; //Resteamos cifra

    }

    
    }

    //-------------------------------------------------------RESET-------------------//

    function reset(){
      document.getElementById("display").value=0;
      cifra="";
      acumulado=0;
      sumar=false;
      restar=false;
      multiplicar=false;
      dividir=false;
      p_operacion=false;

    }

    function res(){
      console.log("cifra= "+cifra);
      console.log("acumulado= "+acumulado);
    }

    //--------------Campo de else if de operaciones previas-----------------------
    /*
    else if (restar){      

        acumulado=acumulado-parseInt(cifra);

        document.getElementById("display").value=acumulado;//Siempre muestra el acumulado
      }

      else if(multiplicar){

        acumulado=acumulado*parseInt(cifra);

        document.getElementById("display").value=acumulado;//Siempre muestra el acumulado


      }

      else if(dividir){
        acumulado=acumulado/parseInt(cifra);

        document.getElementById("display").value=acumulado;//Siempre muestra el acumulado

      }
      else if(factorial){

        acumulado=acumulado;
        cifra=0;        
      }

      else if (sumar){

      acumulado=acumulado+parseInt(cifra);//Si lo ultimo q hiciste es sumar, terminame de acumular todo lo que hay en la pantalla en acumulado para poder operar con un acumulado real
      document.getElementById("display").value=acumulado;
      //Me termina de montrar el acumulado

    }

    */




    
</script>



</head>

<body>
<table width="15%" border="1" type="CajaCal">
  <tr>
    <td colspan="4" align="center" class="disp" >
    <input name="display" type="text" class="color_display" id="display" size="25"></td><!--Los números que ingrese serán considerados texto-->
  </tr>
  <tr>
    <td width="26%"><input name="button" type="button" class="numero" id="button" value="+" onclick="suma()" ></td>
    <td width="21%"><input name="button2" type="button" class="numero" id="button2" value="-" onclick="resta()"></td>
    <td width="21%"><input name="button3" type="button" class="numero" id="button3" value="*" onclick="multiplica()" ></td>
    <td width="32%"><input name="button4" type="button" class="numero" id="button4" value="/" onclick="divide()" ></td>
  </tr>
  <tr>
    <td><input name="num7" type="button" class="numero" id="num7" value="7" onclick="display_numeros(7)"></td>
    <td><input name="num8" type="button" class="numero" id="num8" value="8" onclick="display_numeros(8)"></td>
    <td><input name="num9" type="button" class="numero" id="num9" value="9" onclick="display_numeros(9)"></td>
    <td><input name="ac" type="button" class="numero" id="ac" value="ac" onclick="reset()"></td>
  </tr>
  <tr>
    <td><input name="num4" type="button" class="numero" id="num4" value="4" onclick="display_numeros(4)"></td>
    <td><input name="num5" type="button" class="numero" id="num5" value="5" onclick="display_numeros(5)"></td>
    <td><input name="num6" type="button" class="numero" id="num6" value="6" onclick="display_numeros(6)"></td>
    <td><input name="fact" type="button" class="numero" id="fact" value="X!" onclick="fact()"></td>
  </tr>
  <tr>
    <td><input name="num1" type="button" class="numero" id="num1" value="1" onclick="display_numeros(1)"></td>
    <td><input name="num2" type="button" class="numero" id="num2" value="2" onclick="display_numeros(2)"></td>
    <td><input name="num3" type="button" class="numero" id="num3" value="3" onclick="display_numeros(3)"></td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><input name="num0" type="button" class="numero" id="num0" value="0" onclick="display_numeros(0)"></td>
    <td><input name="button17" type="button" class="numero" id="button17" value="," onclick="display_numeros('.')"></td>
    <td colspan="2"><input name="button12" type="button" class="igual" id="button12" value="=" onclick="igual()"></td>
  </tr>
</table>

<script>
  document.getElementById("display").value=0;
</script>
      
      <footer>Mi primera calculadora, Adolfo Castro.</footer>

</body>
</html>

